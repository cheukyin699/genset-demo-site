{% extends "base.html" %}

{% block extra_headers %}
<script type="text/javascript"
src="{{ url_for('static', filename='experiment.js') }}"></script>
<script src='https://www.google.com/recaptcha/api.js'></script>
{% endblock %}

{% block content %}

<ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active">
        <a href="#instructions" aria-controls="instructions" role="tab" data-toggle="tab">
            Instructions
        </a>
    </li>
    <li role="presentation">
        <a href="#upload" aria-controls="upload" role="tab" data-toggle="tab">
            Upload
        </a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="instructions">
        <h1>Instructions</h1>

        <p>
            No purchase necessary. Some assembly required. No batteries
            included.
        </p>
    </div>
    <div class="tab-pane" id="upload">
        <form id="form" action="/upload" method="POST" enctype="multipart/form-data">
            {{ form.csrf_token }}

            <label for="testzip">CSV file for testing against</label>
            {{ form.testzip }}
            <br>
            
            <label for="trainingset">The organism to train against</label><br>
            {{ form.trainingset }}
            {{ form.trainingzip }}
            <br><br>
            
            <button class="btn btn-primary g-recaptcha"
            data-sitekey="{{ sitekey }}"
            data-callback="onSubmitForm"
            data-size="invisible">Upload</Button>
        </form>
        
        <script type="text/javascript">
            function onSubmitForm(token) {
                document.getElementById("form").submit();
            }
        </script>
    </div>
</div>

{% endblock %}
