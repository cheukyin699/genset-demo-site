{% extends "base.html" %}

{% block extra_headers %}
<script>
// Variables from python
var sessionID = "{{ sid }}";
var usingFirebase = false;
if ("{{ using_firebase }}" === "true") {
    usingFirebase = true;
}
</script>
<script src="https://www.gstatic.com/firebasejs/4.0.0/firebase.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='view.js') }}"></script>
{% endblock %}

{% block content %}

<h1>
    Session ID: <code class='sid'>{{ sid }}</code>
    <a class="btn btn-primary" href="{{ url_for('download', sid=sid) }}"
            style="float: right; margin-left: 1em">Download</a>
    <button class="btn btn-danger" data-toggle="modal" style="float: right"
            data-target="#deleteModal">Delete</button>
</h1>
<div class="progress">
    <div class="progress-bar progress-bar-success" role="progressbar"
    aria-valuenow=0 aria-valuemin=0 aria-valuemax=100 style="min-width: 2em;">
        0%
    </div>
</div>

<pre id='output'>
</pre>

<div class="modal fade" id="deleteModal" tabindex="-1"
    role="dialog" aria-labelledby="delete">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3>Delete Everything?</h3>
            </div>

            <div class="modal-body">
                <p>
                    Do you really want to delete all your progress?
                    There is no going back.
                </p>
            </div>

            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal">No</button>
                <button class="btn btn-danger" onclick="deleteSession()"
                        data-dismiss="modal">
                    I understand the risks. Delete progress.
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}